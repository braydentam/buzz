{"ast":null,"code":"var _s = $RefreshSig$();\nimport axios from \"axios\";\nimport * as url from \"./urls\";\nimport { useState } from \"react\";\nimport { useAuthContext } from \"../hooks/useAuthContext\";\nexport const UserLogin = async (req, res) => {\n  const {\n    username,\n    password\n  } = req;\n  if (!username || !password) return res.status(400).send(\"Please enter username/password\");\n  var formdata = new FormData();\n  formdata.append(\"username\", username);\n  formdata.append(\"password\", password);\n  var config = {\n    method: \"post\",\n    url: url.LOGIN,\n    headers: formdata.getHeaders ? formdata.getHeaders() : {\n      \"Content-Type\": \"multipart/form-data\"\n    },\n    data: formdata\n  };\n  axios(config).then(function (response) {\n    localStorage.setItem(\"user\", JSON.stringify(response.data));\n    // dispatch({ type: \"LOGIN\", payload: response.data });\n    if (res) {\n      res(response.data);\n    }\n    return response.data;\n  }).catch(function (error) {\n    console.log(error.response.data.error);\n    if (res) {\n      res({\n        error: error.response.data.error\n      });\n    }\n    return {\n      error: error.response.data.error\n    };\n  });\n};\n\n// export const useLogin = () => {\n//   const [error, setError] = useState(null);\n//   const { dispatch } = useAuthContext()\n\n//   const login = async (req, res) => {\n//     setError(null);\n//     const { username, password } = req;\n//     if (!username || !password)\n//       return res.status(400).send(\"Please enter username/password\");\n//     var formdata = new FormData();\n//     formdata.append(\"username\", username);\n//     formdata.append(\"password\", password);\n//     var config = {\n//       method: \"post\",\n//       url: url.LOGIN,\n//       headers: formdata.getHeaders\n//         ? formdata.getHeaders()\n//         : { \"Content-Type\": \"multipart/form-data\" },\n//       data: formdata,\n//     };\n//     axios(config)\n//       .then(function (response) {\n//         console.log(response);\n//         localStorage.setItem('user', JSON.stringify(response.data))\n//         dispatch({type: 'LOGIN', payload: response.data})\n//       })\n//       .catch(function (error) {\n//         console.log(error.response.data.error);\n//         setError(error.response.data.error);\n//       });\n//   };\n//   return { login, error };\n// };\n_c = UserLogin;\nexport const useSignup = () => {\n  _s();\n  const {\n    dispatch\n  } = useAuthContext();\n  const [error, setError] = useState(null);\n  const login = async (req, res) => {\n    setError(null);\n    const {\n      name,\n      username,\n      password\n    } = req;\n    if (!name || !username || !password) return res.status(400).send(\"Please enter name/username/password\");\n    var formdata = new FormData();\n    formdata.append(\"name\", name);\n    formdata.append(\"username\", username);\n    formdata.append(\"password\", password);\n    var config = {\n      method: \"post\",\n      url: url.SIGNUP,\n      headers: formdata.getHeaders ? formdata.getHeaders() : {\n        \"Content-Type\": \"multipart/form-data\"\n      },\n      data: formdata\n    };\n    axios(config).then(function (response) {\n      console.log(response);\n      localStorage.setItem(\"user\", JSON.stringify(response.data));\n      dispatch({\n        type: \"LOGIN\",\n        payload: response.data\n      });\n    }).catch(function (error) {\n      console.log(error.response.data.error);\n      setError(error.response.data.error);\n    });\n  };\n  return {\n    login,\n    error\n  };\n};\n_s(useSignup, \"t3tokQEw2GQWksDLJfPJyXrGMc8=\", false, function () {\n  return [useAuthContext];\n});\nvar _c;\n$RefreshReg$(_c, \"UserLogin\");","map":{"version":3,"names":["axios","url","useState","useAuthContext","UserLogin","req","res","username","password","status","send","formdata","FormData","append","config","method","LOGIN","headers","getHeaders","data","then","response","localStorage","setItem","JSON","stringify","catch","error","console","log","_c","useSignup","_s","dispatch","setError","login","name","SIGNUP","type","payload","$RefreshReg$"],"sources":["C:/Users/brayd/Documents/Work/Buzz/frontend/src/api/requests.js"],"sourcesContent":["import axios from \"axios\";\r\nimport * as url from \"./urls\";\r\nimport { useState } from \"react\";\r\nimport { useAuthContext } from \"../hooks/useAuthContext\";\r\n\r\nexport const UserLogin = async (req, res) => {\r\n  const { username, password } = req;\r\n  if (!username || !password)\r\n    return res.status(400).send(\"Please enter username/password\");\r\n  var formdata = new FormData();\r\n  formdata.append(\"username\", username);\r\n  formdata.append(\"password\", password);\r\n  var config = {\r\n    method: \"post\",\r\n    url: url.LOGIN,\r\n    headers: formdata.getHeaders\r\n      ? formdata.getHeaders()\r\n      : { \"Content-Type\": \"multipart/form-data\" },\r\n    data: formdata,\r\n  };\r\n  axios(config)\r\n    .then(function (response) {\r\n      localStorage.setItem(\"user\", JSON.stringify(response.data));\r\n      // dispatch({ type: \"LOGIN\", payload: response.data });\r\n      if(res) { res(response.data) }\r\n      return response.data\r\n    })\r\n    .catch(function (error) {\r\n      console.log(error.response.data.error);\r\n      if(res) { res({error: error.response.data.error}) }\r\n      return { error: error.response.data.error }\r\n    });\r\n};\r\n\r\n// export const useLogin = () => {\r\n//   const [error, setError] = useState(null);\r\n//   const { dispatch } = useAuthContext()\r\n\r\n//   const login = async (req, res) => {\r\n//     setError(null);\r\n//     const { username, password } = req;\r\n//     if (!username || !password)\r\n//       return res.status(400).send(\"Please enter username/password\");\r\n//     var formdata = new FormData();\r\n//     formdata.append(\"username\", username);\r\n//     formdata.append(\"password\", password);\r\n//     var config = {\r\n//       method: \"post\",\r\n//       url: url.LOGIN,\r\n//       headers: formdata.getHeaders\r\n//         ? formdata.getHeaders()\r\n//         : { \"Content-Type\": \"multipart/form-data\" },\r\n//       data: formdata,\r\n//     };\r\n//     axios(config)\r\n//       .then(function (response) {\r\n//         console.log(response);\r\n//         localStorage.setItem('user', JSON.stringify(response.data))\r\n//         dispatch({type: 'LOGIN', payload: response.data})\r\n//       })\r\n//       .catch(function (error) {\r\n//         console.log(error.response.data.error);\r\n//         setError(error.response.data.error);\r\n//       });\r\n//   };\r\n//   return { login, error };\r\n// };\r\n\r\nexport const useSignup = () => {\r\n  const { dispatch } = useAuthContext();\r\n  const [error, setError] = useState(null);\r\n\r\n  const login = async (req, res) => {\r\n    setError(null);\r\n    const { name, username, password } = req;\r\n    if (!name || !username || !password)\r\n      return res.status(400).send(\"Please enter name/username/password\");\r\n    var formdata = new FormData();\r\n    formdata.append(\"name\", name);\r\n    formdata.append(\"username\", username);\r\n    formdata.append(\"password\", password);\r\n    var config = {\r\n      method: \"post\",\r\n      url: url.SIGNUP,\r\n      headers: formdata.getHeaders\r\n        ? formdata.getHeaders()\r\n        : { \"Content-Type\": \"multipart/form-data\" },\r\n      data: formdata,\r\n    };\r\n    axios(config)\r\n      .then(function (response) {\r\n        console.log(response);\r\n        localStorage.setItem(\"user\", JSON.stringify(response.data));\r\n        dispatch({ type: \"LOGIN\", payload: response.data });\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error.response.data.error);\r\n        setError(error.response.data.error);\r\n      });\r\n  };\r\n  return { login, error };\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}